---
sidebar_position: 2
---

# Использование собственной версии Java

Данное руководство описывает, как подключить и использовать **собственную версию Java (JDK/JRE)** при сборке профиля в GML Backend.

---

## 1. Определение целевой платформы

Перейдите в директорию:

```
/srv/gml/data/GmlBackend/runtime/
```

Внутри вы найдёте каталоги, соответствующие различным операционным системам:

```
linux/
linux-i386/
mac-os/
mac-os-arm64/
windows-arm64/
windows-x64/  ← пример
windows-x86/
```

> ⚠️ Выберите каталог, соответствующий системе, под которую вы собираете профиль.
> В данном примере используется **`windows-x64`**.

---

## 2. Подготовка папки для своей Java

Перейдите в директорию выбранной платформы, например:

```
/srv/gml/data/GmlBackend/runtime/windows-x64/
```

Создайте (или откройте, если уже существует) каталог:

```
java-runtime-gamma
```

---

## 3. Загрузка собственной Java

В каталоге `java-runtime-gamma` уже может находиться предустановленная Java.
Чтобы заменить её своей версией:

1. Удалите все имеющиеся файлы в этой папке.
2. Скопируйте сюда содержимое вашей JDK или JRE, которую хотите использовать.
3. Убедитесь, что структура директории корректна и содержит исполняемые файлы (`bin/java`, `bin/java.exe` и т.п.).

---

## 4. Установка прав доступа

Для Linux или других UNIX-систем установите права доступа, разрешающие только чтение и выполнение:

```bash
chmod 0555 java-runtime-gamma
```

Это создаст следующие разрешения:

| Разрешения     | Владелец | Группа | Прочие |
| -------------- | -------- | ------ | ------ |
| R (Чтение)     | ✅        | ✅      | ✅      |
| W (Запись)     | ❌        | ❌      | ❌      |
| X (Выполнение) | ✅        | ✅      | ✅      |

**Код прав доступа:** `0555`
**Владелец:** root
**Группа:** root

> ✅ Это защищает вашу Java от случайного изменения или удаления.

---

## 5. Альтернативный способ (Windows, без WSL)

Если вы работаете под **Windows 10/11** и не используете WSL, можно установить аналогичные ограничения через свойства NTFS:

1. Щёлкните правой кнопкой мыши по папке `java-runtime-gamma` → **Свойства** → **Безопасность**.
2. Нажмите **Изменить**.
3. Для каждой группы (например, *Users*, *Administrators*) установите флажок **Запретить** в строке **Запись (Write)**.
4. Нажмите **Применить** → **OK**.

Это эквивалент команды `chmod 0555` в среде Windows.

---

## 6. Проверка работы

После выполнения шагов убедитесь, что:

* структура папки `java-runtime-gamma` корректна;
* присутствуют все необходимые исполняемые файлы (`java`, `javac` и др.);
* права доступа установлены правильно.

Теперь при сборке профиля для соответствующей платформы (в примере — `windows-x64`) будет использоваться именно ваша версия Java.

---

## 7. Примечание для других платформ

Если вы собираете профиль под другую ОС:

* просто замените `windows-x64` в путях на нужный каталог, например:

  * `linux`
  * `linux-i386`
  * `mac-os`
  * `mac-os-arm64`

---

## ✅ Результат

После выполнения инструкции:

* GML Backend будет использовать вашу собственную Java при сборке профиля;
* версия Java полностью контролируется вами;
* исключается влияние стандартного окружения или встроенных рантаймов.